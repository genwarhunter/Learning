# Теория
## 1. Что такое RAID для каких целей он используется?
RAID - дисковый массив из нескольких дисков. Используется для повышения надежности и/или повышения скорости работы дисковых устройств.
## 2. Объясните различия между Raid0, Raid1 и Raid5? Плюсы минусу, принцип.
-   RAID0 - массив дисков с чередованием данных. Обладает высокой скоростью записи и чтения, однако имеет самую низкую надежность хранения, поскольку выход любого диска приводит к потере всего массива.
-   RAID1 - зеркалированный массив, в котором запись идет на все диски сразу. Обладает наибольшей степенью надежности и высокой скоростью чтения, однако наименее эффективно использует дисковое пространство.
-   RAID5 - массив дисков с поблочным чередованием. Позволяет проводить параллельную запись, обладает повышенной скоростью чтения, высокой эффективностью использования дискового пространства и допускает выход из строя одного из дисков. Однако в случае потери одного диска повышается нагрузка на остальные из-за процесса восстановления RAID.
## 3. Что такое Raid 10?
RAID10 - массив дисков с зеркалированием и чередованием (массив RAID0 из нескольких RAID1).
## 4. Аппаратный, софтфовый и fake raid что это?
-   Аппаратный - отдельный контроллер с собственным процессором и кэшом, использующимися для выполнения дисковых операций.
-   Fake raid - микрочип на материнской плате, частично выполняющий функционал аппаратного рейд-контроллера
-   Софтовый - RAID, созданный средствами операционной системы и программного обеспечения
## 5. Что такое LVM? Для чего применяется?
LVM - подсистема ОС Linux, позволяющая использовать разные области одного диска и/или области с разных дисков в качестве одного логического тома.
## 6. Опишите структуру LVM
-   Физический том - устройство, представимое в ОС как один диск
-   Группа физических томов
-   Логический том, доступный программам
# Практика
## 1. Добавить в виртуальном сервере два hdd
![](https://i.imgur.com/0LlC8gu.png)
## 2. Собрать на них raid1 массив
	 $ cfdisk /dev/sdb
![](https://i.imgur.com/CepIBzI.png)

	 $ cfdisk /dev/sdc
![](https://i.imgur.com/OnqXmNd.png)

	$ mdadm --create /dev/md0 --level=1 --raid-devices=2 /dev/sdb1 /dev/sdc1
![](https://i.imgur.com/CCrHN87.png)

## 3. Поверх raid массива развернуть lvm
	$ pvcreate /dev/md0
	$ vgcreate test /dev/md0
	$ lvcreate -n test -L4G test
## 4. Создать файловую систему в lvm разделах и примонтировать в систему
	 $ mkfs.ext4 -L test /dev/test/test
	 $ mkdir /mnt/test
	 $ mount /dev/test/test /mnt/test
![](https://i.imgur.com/TgMyAJV.png)
## 5. Продемонстрировать умение замены жесткого диска
	 $ mdadm --manage /dev/md0 --fail /dev/sdb1
	 $ mdadm --manage /dev/md0 --remove /dev/sdb1
	 $ sfdisk -d /dev/sdc | sfdisk /dev/sdb
![](https://i.imgur.com/r8FlDPL.png)

	 $ mdadm --manage /dev/md1 --add /dev/sdb1
	 $ mdadm --detail /dev/md1
![](https://i.imgur.com/yFfDQDs.png)
## 6. Расширить размер раздела за счет неиспользуемого пространтсва в raid массиве
	 $ pvresize /dev/md1
	 $ lvextend -l +100%FREE /dev/mapper/test-test
	 $ e2fsck -f /dev/mapper/test-test
	 $ resize2fs /dev/mapper/test-test
![](https://i.imgur.com/Ei31VPh.png)